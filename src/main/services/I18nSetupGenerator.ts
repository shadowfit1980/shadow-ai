/**
 * üåç I18nSetupGenerator
 * 
 * Internationalization:
 * - i18n, RTL, pluralization
 */

import { EventEmitter } from 'events';

export class I18nSetupGenerator extends EventEmitter {
    private static instance: I18nSetupGenerator;
    private constructor() { super(); }
    static getInstance(): I18nSetupGenerator {
        if (!I18nSetupGenerator.instance) {
            I18nSetupGenerator.instance = new I18nSetupGenerator();
        }
        return I18nSetupGenerator.instance;
    }

    generate(): string {
        return `// I18n Setup Generator - Internationalization, RTL
// Generated by Shadow AI

import i18next from 'i18next';
import { initReactI18next, useTranslation, Trans } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Initialize i18n
export async function initI18n() {
    await i18next
        .use(LanguageDetector)
        .use(initReactI18next)
        .init({
            fallbackLng: 'en',
            supportedLngs: ['en', 'es', 'fr', 'de', 'ja', 'zh', 'ar'],
            interpolation: { escapeValue: false },
            resources: {
                en: { translation: { hello: 'Hello', welcome: 'Welcome' } },
                es: { translation: { hello: 'Hola', welcome: 'Bienvenido' } },
                fr: { translation: { hello: 'Bonjour', welcome: 'Bienvenue' } }
            }
        });
}

// RTL Support
const rtlLanguages = ['ar', 'he', 'fa', 'ur'];

function useDirection() {
    const { i18n } = useTranslation();
    return rtlLanguages.includes(i18n.language) ? 'rtl' : 'ltr';
}

// Language Switcher Component
export function LanguageSwitcher() {
    const { i18n } = useTranslation();
    
    const languages = [
        { code: 'en', name: 'English' },
        { code: 'es', name: 'Espa√±ol' },
        { code: 'fr', name: 'Fran√ßais' }
    ];
    
    return (
        <select value={i18n.language} onChange={(e) => i18n.changeLanguage(e.target.value)}>
            {languages.map(lang => (
                <option key={lang.code} value={lang.code}>{lang.name}</option>
            ))}
        </select>
    );
}

export { initI18n, useTranslation, Trans, useDirection, LanguageSwitcher };
`;
    }
}

export const i18nSetupGenerator = I18nSetupGenerator.getInstance();
